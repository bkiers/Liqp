<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Liqp by bkiers</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Liqp</h1>
        <p class="header">An ANTLR based 'Liquid Template file' parser.</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/bkiers/Liqp/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/bkiers/Liqp/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/bkiers/Liqp">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/bkiers">bkiers</a></p>


      </header>
      <section>
        <h1>Liquid Parser</h1>

<p>The Liquid-grammar can be found in <code>src/grammar/Liquid.g</code>. No parser resides in this repository: it can 
be generated by executing the Ant target <code>generate.parser</code>. There's also a small <code>Main</code> class in <code>src/main/liqp/</code>
that demonstrates how to instantiate a lexer and parser and how to get create an actual syntax tree 
produced by the parser. The <code>Main</code> class can be executed by executing the Ant target <code>run</code>.</p>

<p>The grammar contains some Java specific code, but with a bit of ANTLR knowledge, it shouldn't be too hard 
to rewrite it for a different target (C, Python, JavaScript, C# are all pretty stable ANTLR targets).</p>

<h1>Examples</h1>

<p>Below are a couple of example sources taken from <a href="http://wiki.shopify.com/UsingLiquid">wiki.shopify.com</a>. 
Underneath each example source, the corresponding abstract syntax tree produced by the parser is given.</p>

<h2>1. output</h2>

<pre><code>Hello {{name}}
Hello {{user.name}}
Hello {{ 'tobi' }}
</code></pre>

<p><img src="https://github.com/bkiers/Liqp/raw/master/img/1.png" alt="-"></p>

<h2>2. filters</h2>

<pre><code>The word "tobi" in uppercase: {{ 'tobi' | upcase }}
The word "tobi" has {{ 'tobi' | size }} letters!
Change "Hello world" to "Hi world": {{ 'Hello world' | replace: 'Hello', 'Hi' }}
The date today is {{ 'now' | date: "%Y %b %d" }}
</code></pre>

<p><img src="https://github.com/bkiers/Liqp/raw/master/img/2.png" alt="-"></p>

<h2>3. comment</h2>

<pre><code>Hello world. {% comment %} Now this is a single-line comment {% endcomment %} &lt;br /&gt;
Hello world,
I think I'm gonna be happy today. {% comment %} Now this is a
multi-line comment that should be ignored too,
just like the single-line comment {% endcomment %}
</code></pre>

<p><img src="https://github.com/bkiers/Liqp/raw/master/img/3.png" alt="-"></p>

<h2>4. raw</h2>

<pre><code>{% raw %}{{ 5 | plus: 6 }}{% endraw %} is equal to {{ 5 | plus: 6 }}.
</code></pre>

<p><img src="https://github.com/bkiers/Liqp/raw/master/img/4.png" alt="-"></p>

<h2>5. if, else, unless</h2>

<pre><code>{% if user.payments == empty %}
   you haven't paid yet! 
{% endif %}
</code></pre>

<p><img src="https://github.com/bkiers/Liqp/raw/master/img/5.png" alt="-"></p>

<pre><code>{% if user.age &gt; 18 %}
   Login here
{% else %}
   Sorry, you are too young
{% endif %}
</code></pre>

<p><img src="https://github.com/bkiers/Liqp/raw/master/img/6.png" alt="-"></p>

<pre><code>{% unless user.age &gt; 18 %}
  Sorry, you are too young
{% else %}
  Login here
{% endunless %}
</code></pre>

<p><img src="https://github.com/bkiers/Liqp/raw/master/img/7.png" alt="-"></p>

<h2>6. case</h2>

<pre><code>{% case template %}
  {% when 'index' %}
     Welcome
  {% when 'product' %}
     {{ product.vendor | link_to_vendor }} / {{ product.title }}
  {% else %}
     {{ page_title }}
{% endcase %}
</code></pre>

<p><img src="https://github.com/bkiers/Liqp/raw/master/img/8.png" alt="-"></p>

<h2>7. cycle</h2>

<pre><code>{% cycle 'one', 'two', 'three' %}&lt;br /&gt; 
{% cycle 'one', 'two', 'three' %}&lt;br /&gt; 
{% cycle 'one', 'two', 'three' %}&lt;br /&gt; 
{% cycle 'one', 'two', 'three' %} 
</code></pre>

<p><img src="https://github.com/bkiers/Liqp/raw/master/img/9.png" alt="-"></p>

<pre><code>{% cycle 'group 1': 'one', 'two', 'three' %}&lt;br /&gt; 
{% cycle 'group 1': 'one', 'two', 'three' %}&lt;br /&gt; 
{% cycle 'group 2': 'one', 'two', 'three' %}&lt;br /&gt; 
{% cycle 'group 2': 'one', 'two', 'three' %} 
</code></pre>

<p><img src="https://github.com/bkiers/Liqp/raw/master/img/10.png" alt="-"></p>

<h2>8. for</h2>

<pre><code>{% for item in array %} 
  {{ item }}
{% endfor %} 
</code></pre>

<p><img src="https://github.com/bkiers/Liqp/raw/master/img/11.png" alt="-"></p>

<pre><code>{% for item in array limit:2 offset:2 %} 
  {{ item }}
{% endfor %} 
</code></pre>

<p><img src="https://github.com/bkiers/Liqp/raw/master/img/12.png" alt="-"></p>

<pre><code>{% for i in (1..item.quantity) %}
  {{ i }}
{% endfor %}
</code></pre>

<p><img src="https://github.com/bkiers/Liqp/raw/master/img/13.png" alt="-"></p>

<h2>9. tables</h2>

<pre><code>{% tablerow item in items cols: 3 limit: 12 %}
  {{ item.variable }}
{% endtablerow %}
</code></pre>

<p><img src="https://github.com/bkiers/Liqp/raw/master/img/14.png" alt="-"></p>

<pre><code>{% tablerow item in items cols: 3 %}
  {% if tablerowloop.col_first %}
    First column: {{ item.variable }}
  {% else %}
    Different column: {{ item.variable }}
  {% endif %}
{% endtablerow %}
</code></pre>

<p><img src="https://github.com/bkiers/Liqp/raw/master/img/15.png" alt="-"></p>

<h2>10. assign</h2>

<pre><code>{% assign name = 'freestyle' %}
{% for t in collections.tags %}
  {% if t == name %}
    &lt;p&gt;Freestyle!&lt;/p&gt;
  {% endif %}
{% endfor %}
</code></pre>

<p><img src="https://github.com/bkiers/Liqp/raw/master/img/16.png" alt="-"></p>

<pre><code>{% assign freestyle = false %}
{% for t in collections.tags %}
  {% if t == 'freestyle' %}
    {% assign freestyle = true %}
  {% endif %}
{% endfor %}
{% if freestyle %}
  &lt;p&gt;Freestyle!&lt;/p&gt;
{% endif %}
</code></pre>

<p><img src="https://github.com/bkiers/Liqp/raw/master/img/17.png" alt="-"></p>

<h2>11. capture</h2>

<pre><code>{% capture attribute_name %}{{ item.title | handleize }}-{{ i }}-color{% endcapture %}

&lt;label for="{{ attribute_name }}"&gt;Color:&lt;/label&gt;
&lt;select name="attributes[{{ attribute_name }}]" id="{{ attribute_name }}"&gt;
  &lt;option value="red"&gt;Red&lt;/option&gt;
  &lt;option value="green"&gt;Green&lt;/option&gt;
  &lt;option value="blue"&gt;Blue&lt;/option&gt;
&lt;/select&gt;
</code></pre>

<p><img src="https://github.com/bkiers/Liqp/raw/master/img/18.png" alt="-"></p>

<h2>12. include</h2>

<pre><code>{% assign shape = 'circle' %}
{% include 'color' %}
{% include 'color' with 'red' %}
{% include 'color' with 'blue' %}
{% assign shape = 'square' %}
{% include 'color' with 'red' %}
</code></pre>

<p><img src="https://github.com/bkiers/Liqp/raw/master/img/19.png" alt="-"></p>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>